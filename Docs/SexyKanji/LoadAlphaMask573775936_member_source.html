<HTML>
<HEAD>
<TITLE>SexyKanji - LoadAlphaMask</TITLE>
<script type="text/javascript" src="../common/js.js" language="JavaScript"></script>
<script type="text/javascript" src="leftmenu.js" language="JavaScript"></script>
<script type="text/javascript">
 var relPathToCommmon = "../common/";
 var relPathToHelpDir = "../common/help/";
 var toSearchPage     = "_search','../search";
 Body1();
</script>
<div class="headerPage">LoadAlphaMask</div>
<div class="path"><a href="#" OnMouseOver="link('','../index',this)" class="pathLink">Default mainpage</A><img src="../common/path-arrow.gif" class="path-arrow"><a href="#" OnMouseOver="link('_dir','SexyKanji0',this)" class="pathLink">SexyKanji</A><img src="../common/path-arrow.gif" class="path-arrow"><a href="#" OnMouseOver="link('_class','SexyImage809',this)" class="pathLink">SexyImage</A><img src="../common/path-arrow.gif" class="path-arrow"><span class="pathNonLink">LoadAlphaMask</span></div>
<script type="text/javascript">
 Body2();
 BodyLeftMenuStart();
WriteLeftMenu("","","","");
 BodyLeftMenuEnd();
 Body3();
</script>
<span class="tabInActive"><a href="#" OnMouseOver="linkTab('_member','LoadAlphaMask573775936','_description',this)" class="tabLinkInActive">Description</a></span>
<span class="tabActive"><a href="#" OnMouseOver="linkTab('_member','LoadAlphaMask573775936','_source',this)" class="tabLinkActive">Source</a></span>
<span class="tabInActive"><a href="#" OnMouseOver="linkTab('_member','LoadAlphaMask573775936','_callgraph',this)" class="tabLinkInActive">Call Graph</a></span>
<script type="text/javascript">
 Body4();
</script>
<div class="contentAirTop"></div>
<div class="paragraph2NoTopPadding">Start Line: 254</div>
<pre class="codeExamples">
virtual void <a href="#" onMouseOver="link('_member','LoadAlphaMask573775936',this); ">Sexy::SexyImage::LoadAlphaMask</a>(std::wstring theImageFilePath)
{
    // Prerelease any previous data. In case the Alpha channel is automatically loaded and then a 
    // different alpha channel is specified (JPOAG)
    delete [] <a href="#" onMouseOver="link('_member','mAlphaCompressedDataBuffer1480183968',this); ">mAlphaCompressedDataBuffer</a>;
    <a href="#" onMouseOver="link('_member','mAlphaCompressedDataBuffer1480183968',this); ">mAlphaCompressedDataBuffer</a> = NULL;
    <a href="#" onMouseOver="link('_member','mAlphaCompressedDataSize1480183968',this); ">mAlphaCompressedDataSize</a> = 0;

    std::wstring aFileDir = <a href="#" onMouseOver="link('_member','GetFileDir1640495726',this); ">GetFileDir</a>(theImageFilePath, true);
    std::wstring aFileName =  <a href="#" onMouseOver="link('_member','GetFileName1640495726',this); ">GetFileName</a>(theImageFilePath, true);

    std::wstring anAlphaImageFilePath;
    bool bSuccess = false;

    std::vector&lt;std::string&gt; anExtQueue;
    anExtQueue.push_back(".j2k");anExtQueue.push_back(".jp2");anExtQueue.push_back(".jpf");
    anExtQueue.push_back(".bmp");anExtQueue.push_back(".tga");anExtQueue.push_back(".png");anExtQueue.push_back(".jpg");

    while (!bSuccess &amp;&amp; !anExtQueue.empty())
    {
        // Make _ImageName path.
        anAlphaImageFilePath = aFileDir + L"_" + aFileName + <a href="#" onMouseOver="link('_member','StringToWString1908875876',this); ">StringToWString</a>(anExtQueue.back());
        anExtQueue.pop_back();

        bSuccess = KResource::loadResource(<a href="#" onMouseOver="link('_member','WStringToString351097544',this); ">WStringToString</a>(anAlphaImageFilePath).c_str(), 
            mAlphaCompressedDataBuffer, mAlphaCompressedDataSize);
    }

    // reload
    if(!bSuccess)
    {
        anExtQueue.push_back(".j2k");anExtQueue.push_back(".jp2");anExtQueue.push_back(".jpf");
        anExtQueue.push_back(".bmp");anExtQueue.push_back(".tga");anExtQueue.push_back(".png");anExtQueue.push_back(".jpg");
    }

    while (!bSuccess &amp;&amp; !anExtQueue.empty())
    {
        // If failed above try ImageName_
        anAlphaImageFilePath = aFileDir + aFileName + L"_" + <a href="#" onMouseOver="link('_member','StringToWString1908875876',this); ">StringToWString</a>(anExtQueue.back());
        anExtQueue.pop_back();

        bSuccess = KResource::loadResource(<a href="#" onMouseOver="link('_member','WStringToString351097544',this); ">WStringToString</a>(anAlphaImageFilePath).c_str(), 
            mAlphaCompressedDataBuffer, mAlphaCompressedDataSize);
    }

    if(bSuccess) 
        <a href="#" onMouseOver="link('_member','mAlphaFilePath1480183968',this); ">mAlphaFilePath</a> = WStringToSexyStringFast(anAlphaImageFilePath);
}
</pre><div class="contentAirBottom"></div>
<script type="text/javascript">
 Body5();
Statistics("","","","","");
 Body6();
SetPageTab('_member','_source');
</script>
